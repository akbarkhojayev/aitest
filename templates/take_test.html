{% extends 'base.html' %}

{% block title %}Test Topshirish{% endblock %}

{% block content %}
<div style="margin-bottom: 35px;">
    <h2 style="color: #333; font-size: 32px; font-weight: 700; margin-bottom: 8px;">üìù Test Topshirish</h2>
    <p style="color: #667eea; font-size: 20px; font-weight: 600;">{{ test.title }}</p>
</div>

{% if test.description %}
<div class="card" style="background: linear-gradient(135deg, #f0f8ff 0%, #fff 100%); border-left: 4px solid #667eea; margin-bottom: 35px;">
    <p style="color: #333; line-height: 1.6;">{{ test.description }}</p>
</div>
{% endif %}

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px 30px; border-radius: 15px; margin-bottom: 35px; color: white; box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); display: flex; justify-content: space-between; align-items: center;">
    <div>
        <p style="opacity: 0.9; margin-bottom: 5px;">Jami Savollar</p>
        <p style="font-size: 32px; font-weight: 700;">{{ questions.count }}</p>
    </div>
    <div style="text-align: right;">
        <p style="opacity: 0.9; margin-bottom: 5px;">‚è±Ô∏è Vaqt</p>
        <p style="font-size: 24px; font-weight: 600;">Cheklanmagan</p>
    </div>
</div>

<form method="POST">
    {% csrf_token %}
    
    {% for question in questions %}
    <div class="card" style="margin-bottom: 25px; background: linear-gradient(135deg, #f8f9ff 0%, #fff 100%); border-left: 4px solid #667eea;">
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 20px;">
            <h4 style="color: #333; font-size: 18px; font-weight: 600; flex: 1; line-height: 1.6;">
                <span style="background: #667eea; color: white; padding: 4px 12px; border-radius: 20px; font-size: 14px; margin-right: 10px;">
                    {{ forloop.counter }}
                </span>
                {{ question.question_text }}
            </h4>
        </div>
        
        <div style="display: grid; gap: 12px;">
            <label class="option-label" style="display: flex; align-items: center; padding: 16px; background: white; border-radius: 10px; cursor: pointer; border: 2px solid #e0e0e0; transition: all 0.3s;">
                <input type="radio" name="question_{{ question.id }}" value="A" required style="margin-right: 15px; width: 20px; height: 20px; cursor: pointer;">
                <span style="font-weight: 600; color: #667eea; margin-right: 10px; font-size: 16px;">A)</span>
                <span style="flex: 1; color: #333;">{{ question.option_a }}</span>
            </label>
            
            <label class="option-label" style="display: flex; align-items: center; padding: 16px; background: white; border-radius: 10px; cursor: pointer; border: 2px solid #e0e0e0; transition: all 0.3s;">
                <input type="radio" name="question_{{ question.id }}" value="B" required style="margin-right: 15px; width: 20px; height: 20px; cursor: pointer;">
                <span style="font-weight: 600; color: #667eea; margin-right: 10px; font-size: 16px;">B)</span>
                <span style="flex: 1; color: #333;">{{ question.option_b }}</span>
            </label>
            
            <label class="option-label" style="display: flex; align-items: center; padding: 16px; background: white; border-radius: 10px; cursor: pointer; border: 2px solid #e0e0e0; transition: all 0.3s;">
                <input type="radio" name="question_{{ question.id }}" value="C" required style="margin-right: 15px; width: 20px; height: 20px; cursor: pointer;">
                <span style="font-weight: 600; color: #667eea; margin-right: 10px; font-size: 16px;">C)</span>
                <span style="flex: 1; color: #333;">{{ question.option_c }}</span>
            </label>
            
            <label class="option-label" style="display: flex; align-items: center; padding: 16px; background: white; border-radius: 10px; cursor: pointer; border: 2px solid #e0e0e0; transition: all 0.3s;">
                <input type="radio" name="question_{{ question.id }}" value="D" required style="margin-right: 15px; width: 20px; height: 20px; cursor: pointer;">
                <span style="font-weight: 600; color: #667eea; margin-right: 10px; font-size: 16px;">D)</span>
                <span style="flex: 1; color: #333;">{{ question.option_d }}</span>
            </label>
        </div>
    </div>
    {% endfor %}
    
    <div style="text-align: center; margin-top: 40px; padding: 30px; background: linear-gradient(135deg, #f8f9ff 0%, #fff 100%); border-radius: 15px;">
        <p style="color: #666; margin-bottom: 20px; font-size: 16px;">Barcha savollarni javobladingizmi?</p>
        <div style="display: flex; gap: 15px; justify-content: center;">
            <button type="submit" class="btn btn-success" style="font-size: 18px; padding: 18px 50px;">
                ‚úÖ Testni Yakunlash
            </button>
            <a href="{% url 'dashboard' %}" class="btn btn-danger" style="font-size: 18px; padding: 18px 50px;">
                ‚ùå Bekor qilish
            </a>
        </div>
    </div>
</form>

<style>
    .option-label:hover {
        border-color: #667eea !important;
        background: #f8f9ff !important;
        transform: translateX(5px);
    }
    .option-label:has(input[type="radio"]:checked) {
        border-color: #667eea !important;
        background: linear-gradient(135deg, #f0f8ff 0%, #fff 100%) !important;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
    }
    input[type="radio"]:checked {
        accent-color: #667eea;
    }
</style>
{% endblock %}
